{% extends "base.html" %}

{% block contenido %}
<div class="container mt-4" style="max-width: 900px;">

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Hilo #{{ thread.pk }}</h2>
    <a href="{% url 'inbox' %}" class="btn btn-secondary">Volver</a>
  </div>

  <div class="mb-3 text-muted">
    Participantes:
    {% for u in thread.participants.all %}
      {{ u.username }}{% if not forloop.last %}, {% endif %}
    {% endfor %}
  </div>

  <div class="card mb-4">
    <div class="card-body" style="max-height: 400px; overflow-y: auto;">
      {% if messages %}
        {% for m in messages %}
          <div class="mb-3">
            <div class="small text-muted">
              <strong>{{ m.sender.username }}</strong> - {{ m.created_at }}
            </div>
            <div class="p-2 border rounded bg-light">
              {{ m.body }}
            </div>
          </div>
        {% endfor %}
      {% else %}
        <p>No hay mensajes en este hilo.</p>
      {% endif %}
    </div>
  </div>

  <h5>Responder</h5>
  <form method="post">
    {% csrf_token %}

    <div class="mb-3">
      {{ form.body.label_tag }}
      {{ form.body }}
    </div>

    <button type="submit" class="btn btn-primary">Enviar</button>
  </form>

</div>
{% endblock %}

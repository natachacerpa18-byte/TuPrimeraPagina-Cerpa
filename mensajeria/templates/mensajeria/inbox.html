{% extends "base.html" %}

{% block contenido %}
<div class="container mt-4" style="max-width: 800px;">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Mis mensajes</h2>
    <a href="{% url 'message_create' %}" class="btn btn-success">Nuevo mensaje</a>
  </div>

  {% if threads %}
    <div class="list-group">
      {% for t in threads %}
        <a href="{% url 'thread_detail' t.pk %}" class="list-group-item list-group-item-action">
          <div class="d-flex justify-content-between">
            <strong>Hilo #{{ t.pk }}</strong>
            <small class="text-muted">{{ t.updated_at }}</small>
          </div>

          <div class="small text-muted">
            Participantes:
            {% for u in t.participants.all %}
              {{ u.username }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
          </div>
        </a>
      {% endfor %}
    </div>
  {% else %}
    <p>No tenés mensajes todavía.</p>
    <a href="{% url 'message_create' %}" class="btn btn-primary">Crear mi primer mensaje</a>
  {% endif %}
</div>
{% endblock %}
